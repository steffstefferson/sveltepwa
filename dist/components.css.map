{
  "version": 3,
  "file": "components.css",
  "sources": [
    "..\\App.svelte",
    "..\\Facts.svelte",
    "..\\Images.svelte",
    "..\\Map.svelte",
    "..\\ImageFullScreen.svelte",
    "..\\HeaderTopBar.svelte",
    "..\\ManageContribution.svelte",
    "..\\Fact.svelte",
    "..\\Image.svelte",
    "..\\LocationSelector.svelte",
    "..\\ImageSelector.svelte"
  ],
  "sourcesContent": [
    "<script>\r\n  import \"./App.scss\";\r\n  import Facts from \"./components/Facts.svelte\";\r\n  import Images from \"./components/Images.svelte\";\r\n  import Map from \"./components/Map.svelte\";\r\n  import Settings from \"./components/Settings.svelte\";\r\n  import AddPlaceToBe from \"./components/AddPlaceToBe.svelte\";\r\n  import Login from \"./components/Login.svelte\";\r\n  import ImageFullScreen from \"./components/ImageFullScreen.svelte\";\r\n  import HeaderTopBar from \"./components/HeaderTopBar.svelte\";\r\n  import ShareApiTest from \"./components/ShareApiTest.svelte\";\r\n  import Contribution from \"./components/Contribution.svelte\";\r\n  import ManageContribution from \"./components/ManageContribution.svelte\";\r\n  import Notification from \"./components/Notification.svelte\";\r\n  import router from \"page\";\r\n  import { DenseFixedAdjust } from \"@smui/top-app-bar\";\r\n\r\n  let page;\r\n  let params = {};\r\n\r\n  router(\"/login\", () => (page = Login));\r\n  router(\"/settings\", () => (page = Settings));\r\n  router(\"/contribute\", () => (page = Contribution));\r\n  router(\"/contributions\", () => (page = ManageContribution));\r\n  router(\"/addImage\", () => (page = AddPlaceToBe));\r\n  router(\"/shareApiTest\", () => (page = ShareApiTest));\r\n\r\n  router(\"/facts\", () => (page = Facts));\r\n  router(\r\n    \"/facts?key=:factKey\",\r\n    (ctx, next) => {\r\n      params = ctx.params;\r\n      next();\r\n    },\r\n    () => (page = Facts)\r\n  );\r\n\r\n  router(\"/map\", () => (page = Map));\r\n  router(\"/images\", () => (page = Images));\r\n\r\n  router(\r\n    \"/images/slideShow\",\r\n    (ctx, next) => {\r\n      params = ctx.querystring.split(\"&\").reduce((red, keyval) => {\r\n        let [key, val] = keyval.split(\"=\");\r\n        red[key] = val;\r\n        return red;\r\n      }, {});\r\n      next();\r\n    },\r\n    () => (page = ImageFullScreen)\r\n  );\r\n\r\n  router(\"/*\", () => (page = AddPlaceToBe));\r\n  router.start();\r\n</script>\r\n\r\n<style>:global(body){margin:0}:global(.formButton){margin-top:20px;margin-left:10px;float:right}:global(app,body,html){display:block!important;height:auto!important;width:auto!important;position:static!important;font-family:Roboto,sans-serif}.mainContainer{padding:40px 20px}\n/*# sourceMappingURL=src/App.svelte.map */</style>\r\n\r\n<HeaderTopBar />\r\n<main class=\"mainContainer\" DenseFixedAdjust>\r\n  <svelte:component this={page} {params} />\r\n</main>\r\n<Notification />\r\n",
    "<script>\r\n  import { svelteFactStore, deleteFact } from \"./../services/factsService\";\r\n  import Dialog, { Title, Content, Actions, InitialFocus } from \"@smui/dialog\";\r\n  import { notify } from \"./../services/notifyService\";\r\n  import Fact from \"./Fact.svelte\";\r\n  import Button, { Label } from \"@smui/button\";\r\n  import { userStore } from \"./../services/loginService.js\";\r\n  import Kitchen from \"@smui/snackbar/kitchen/index\";\r\n  import page from \"page\";\r\n\r\n  export let params;\r\n  let selectedFactDialog;\r\n  let selectedFact = null;\r\n  let loggedIn = false;\r\n  userStore.subscribe(user => {\r\n    loggedIn = user.loggedIn;\r\n  });\r\n\r\n  let kitchen;\r\n\r\n  function onDeleteFact(event) {\r\n    return pushToKitchen(event.detail.fact);\r\n  }\r\n\r\n  function deleteFactSerious(fact) {\r\n    deleteFact(fact).then(success => {\r\n      if (success) {\r\n        notify(\"fact was deleted\");\r\n      } else {\r\n        notify(\"something went wrong while deleting the fact\");\r\n      }\r\n    });\r\n  }\r\n\r\n  if (params.factKey) {\r\n    svelteFactStore.subscribe(facts => {\r\n      selectedFact = facts.filter(x => (x.key = params.factKey))[0];\r\n      if (selectedFact) {\r\n        selectFact(selectedFact);\r\n      }\r\n    });\r\n  }\r\n\r\n  function selectFact(fact) {\r\n    selectedFact = fact;\r\n    selectedFactDialog.open();\r\n    page(\"/facts?key=\" + selectedFact.key);\r\n  }\r\n\r\n  function pushToKitchen(fact) {\r\n    kitchen.push({\r\n      props: {\r\n        variant: \"stacked\"\r\n      },\r\n      label: \"Do you really want to delete this fact?\",\r\n      actions: [\r\n        {\r\n          onClick: () => deleteFactSerious(fact),\r\n          text: \"Yes, please\"\r\n        },\r\n        {\r\n          text: \"Nope\"\r\n        }\r\n      ],\r\n      dismissButton: false\r\n    });\r\n  }\r\n</script>\r\n\r\n<style type=\"text/postcss\">.list{display:flex;flex-wrap:wrap;justify-content:space-evenly}.list-item{display:flex;padding:.5em;width:350px;flex-grow:1}.list-content p{flex:1 0 auto}[dir=ltr] ul{padding-left:5px}[dir=rtl] ul{padding-right:5px}\n/*# sourceMappingURL=src/components/Facts.svelte.map */</style>\r\n\r\n<div style=\"height: 50px;\">\r\n  <Button href=\"/contribute\" variant=\"raised\" class=\"formButton\">\r\n    <Label>Contribute your own fact</Label>\r\n  </Button>\r\n</div>\r\n<div>\r\n  <ul class=\"list\">\r\n    {#each $svelteFactStore as fact}\r\n      <li class=\"list-item\" on:click={() => selectFact(fact)}>\r\n        <Fact\r\n          {fact}\r\n          hasDeleteButton={loggedIn}\r\n          on:delete={onDeleteFact}\r\n          hasAcceptButton={false} />\r\n      </li>\r\n    {/each}\r\n  </ul>\r\n</div>\r\n\r\n<Dialog\r\n  bind:this={selectedFactDialog}\r\n  aria-labelledby=\"list-title\"\r\n  aria-describedby=\"list-content\">\r\n  <Title id=\"list-title\">Fact</Title>\r\n  <Content>\r\n    {#if selectedFact}\r\n      <Fact\r\n        fact={selectedFact}\r\n        hasDeleteButton={false}\r\n        hasAcceptButton={false} />\r\n    {/if}\r\n  </Content>\r\n  <Actions>\r\n    <Button action=\"accept\">\r\n      <Label>Got it!</Label>\r\n    </Button>\r\n  </Actions>\r\n</Dialog>\r\n\r\n<Kitchen bind:this={kitchen} dismiss$class=\"material-icons\" />\r\n",
    "<script>\r\n  import { getImages } from \"../services/imageSerivce.js\";\r\n  import Image from \"./Image.svelte\";\r\n  import { userStore } from \"./../services/loginService.js\";\r\n  import Kitchen from \"@smui/snackbar/kitchen/index\";\r\n  import { deleteImageAndMetadata } from \"../services/imageUploadService.js\";\r\n  import { notify } from \"./../services/notifyService.js\";\r\n\r\n  const localStore = getImages();\r\n\r\n  let loggedIn = false;\r\n  userStore.subscribe(user => {\r\n    loggedIn = user.loggedIn;\r\n  });\r\n\r\n  let kitchen;\r\n\r\n  function onDeleteLocation(event) {\r\n    return pushToKitchen(event.detail);\r\n  }\r\n\r\n  function deleteLocationSerious(location) {\r\n    deleteImageAndMetadata(location).then(\r\n      () => {\r\n        notify(\"location was deleted\");\r\n      },\r\n      () => {\r\n        notify(\"something went wrong while deleting the location\");\r\n      }\r\n    );\r\n  }\r\n\r\n  function pushToKitchen(location) {\r\n    kitchen.push({\r\n      props: {\r\n        variant: \"stacked\"\r\n      },\r\n      label: \"Do you really want to delete this location?\",\r\n      actions: [\r\n        {\r\n          onClick: () => deleteLocationSerious(location),\r\n          text: \"Yes, please\"\r\n        },\r\n        {\r\n          text: \"Nope\"\r\n        }\r\n      ],\r\n      dismissButton: false\r\n    });\r\n  }\r\n</script>\r\n\r\n<style type=\"text/postcss\">.list{display:flex;flex-wrap:wrap;justify-content:space-evenly}.list-item{display:flex;padding:.5em;width:300px}.list-content p{flex:1 0 auto}\n/*# sourceMappingURL=src/components/Images.svelte.map */</style>\r\n\r\n<div>\r\n  <ul class=\"list\">\r\n    {#each $localStore as image}\r\n      <li class=\"list-item\">\r\n        <Image\r\n          {image}\r\n          hasDeleteButton={loggedIn}\r\n          on:delete={onDeleteLocation} />\r\n      </li>\r\n    {/each}\r\n  </ul>\r\n</div>\r\n\r\n<Kitchen bind:this={kitchen} dismiss$class=\"material-icons\" />\r\n",
    "<script>\n  import { onMount } from \"svelte\";\n  import { Icon } from \"@smui/icon-button\";\n  import { getImages } from \"../services/imageSerivce.js\";\n  import { tick } from \"svelte\";\n  import page from \"page\";\n\n  export let params;\n  let map;\n  let mapElement;\n  let markers = [];\n\n  function initMap() {\n    if (!googleMapsLoaded) {\n      return;\n    }\n    let initialCoords = { lat: 46.65, lng: 7.709 };\n\n    map = new google.maps.Map(mapElement, {\n      center: initialCoords,\n      zoom: 3\n    });\n  }\n\n  function addImageToMap(image) {\n    if (markers.some(x => x.key == image.key)) {\n      return;\n    }\n\n    var marker = new google.maps.Marker({\n      position: { lat: image.location.latitude, lng: image.location.longitude },\n      title: image.imageTitle,\n      map: map,\n      animation: google.maps.Animation.DROP\n    });\n    marker.key = image.key;\n    marker.addListener(\"click\", function() {\n      createInfoWindow(image, marker);\n    });\n    marker.addListener(\"mouseover\", function() {\n      createInfoWindow(image, marker);\n    });\n    markers.push(marker);\n\n    if (params.key == image.key) {\n      createInfoWindow(image, marker);\n    }\n  }\n\n  // To add the marker to the map, call setMap();\n\n  async function addImagesToMap(images) {\n    while (images.length > 0) {\n      let i = 0;\n      while (images.length > 0 && i++ < 10) {\n        addImageToMap(images.pop());\n      }\n      await tick();\n    }\n  }\n\n  onMount(async () => {\n    initMap();\n    getImages().subscribe(addImagesToMap);\n  });\n\n  function getTemplate(image) {\n    return `<div id=\"content\" class=\"markerPopUp\">\n    <h2>${image.imageTitle}</h2>\n    <div>\n    <img src=\"${image.thumbnail}\" alt=\"${image.imageTitle}\" />\n    <p>${image.funFact}</p>\n    </div></div>`;\n  }\n  let infowindow = null;\n  function createInfoWindow(image, marker) {\n    if (infowindow) {\n      infowindow.close();\n    }\n    infowindow = new google.maps.InfoWindow({\n      content: getTemplate(image)\n    });\n    infowindow.open(map, marker);\n    page(\"/map?key=\" + marker.key);\n  }\n</script>\n\n<style type=\"text/postcss\">#map,.mapContainer{height:100%;width:100%}.mapContainer{position:absolute;left:0}:global(.markerPopUp){padding:10px;text-align:center;max-width:210px}@media (color-index:48){:global(.gm-style-iw-d){overflow:hidden!important}:global(.gm-style-iw),:global(.gm-style-iw-d){background-color:#000!important}:global(.gm-style-iw-t:after){background:#000!important}}@media (prefers-color-scheme:dark){:global(.gm-style-iw-d){overflow:hidden!important}:global(.gm-style-iw),:global(.gm-style-iw-d){background-color:#000!important}:global(.gm-style-iw-t:after){background:#000!important}}:global(.markerPopUp img){max-height:150px}\n/*# sourceMappingURL=src/components/Map.svelte.map */</style>\n\n<div class=\"mapContainer\">\n  <div id=\"map\" bind:this={mapElement} />\n</div>\n",
    "<script>\n  import { getImage } from \"../services/imageSerivce.js\";\n  import IconButton, { Icon } from \"@smui/icon-button\";\n  import { getDisplayTime } from \"../services/displayTime.js\";\n  import page from \"page\";\n\n  export let params;\n\n  let showText = true;\n  console.log(params);\n  let imageSizeContain = false;\n  let backgroundStyle = \"\";\n  let backgroundSize = \"background-size: cover;\";\n  let image = load(params.key, 0);\n  let backUrl = \"/images\";\n\n  function toggleText() {\n    showText = !showText;\n  }\n\n  function getPreviousImage(e) {\n    image = load(image.key, -1);\n  }\n\n  function getNextImage(e) {\n    image = load(image.key, 1);\n  }\n\n  function toggleZoom() {\n    imageSizeContain = !imageSizeContain;\n    if (imageSizeContain) {\n      backgroundSize = \"background-size: contain;\";\n    } else {\n      backgroundSize = \"background-size: cover;\";\n    }\n  }\n\n  function load(key, offset) {\n    const img = getImage(key, offset);\n    backgroundStyle =\n      \"background-image: url(\" +\n      (img.fullImageSizeUrl || img.thumbnail) +\n      \"); \";\n    if (!img.fullImageSizeUrl) {\n      img.loadFullSizeImage().then(fullSizeImageUrl => {\n        backgroundStyle = \"background-image: url(\" + fullSizeImageUrl + \"); \";\n      });\n    }\n    page(\"/images/slideShow?key=\" + key);\n\n    return img;\n  }\n</script>\n\n<style>:global(.lurinsnavicons){font-size:32px!important;padding:0;margin:0!important;width:25px}.container{height:100%;background-position:50%;background-repeat:no-repeat;width:100%;position:absolute;top:0}.textContainer{background-color:#ff0;border:1px solid #000;padding:10px;margin:10px;display:-ms-grid;display:grid;-ms-grid-columns:auto 100px;grid-template-columns:auto 100px;align-items:center;position:absolute;bottom:0;right:10px}.textContainer div{width:100%}.showHideInfoArea{height:80%;position:absolute;bottom:20%;border:none;width:100%}.title{font-size:20px}.text{font-size:14px}\n/*# sourceMappingURL=src/components/ImageFullScreen.svelte.map */</style>\n\n<div class=\"container\" style=\"{backgroundStyle} {backgroundSize}\">\n  <div\n    class=\"showHideInfoArea\"\n    on:mousedown={toggleText}\n    on:touchstart={toggleText}\n    on:touchend={toggleText}\n    on:mouseup={toggleText} />\n  <div\n    class=\"textContainer\"\n    style=\"visibility: {showText ? 'inherit' : 'hidden'}\">\n    <div>\n      <div>\n        <span class=\"title\">{image.imageTitle}</span>\n      </div>\n      <div class=\"text\">{image.funFact}</div>\n      <div class=\"text\">{getDisplayTime(image.insertTime)}</div>\n    </div>\n    <div>\n      <IconButton\n        on:click={() => page('/map?key=' + image.key)}\n        class=\"lurinsnavicons material-icons\"\n        aria-label=\"Open map\">\n        place\n      </IconButton>\n      <IconButton\n        on:click={toggleZoom}\n        class=\"lurinsnavicons material-icons\"\n        aria-label=\"Toggle zoom\">\n        aspect_ratio\n      </IconButton>\n      <IconButton\n        on:click={() => page(backUrl)}\n        class=\"lurinsnavicons material-icons\"\n        aria-label=\"Close\">\n        close\n      </IconButton>\n\n      <IconButton\n        on:click={getPreviousImage}\n        class=\"lurinsnavicons material-icons\"\n        aria-label=\"Back\">\n        navigate_before\n      </IconButton>\n      <IconButton\n        class=\"lurinsnavicons material-icons\"\n        aria-label=\"placeholder\">\n        _\n      </IconButton>\n      <IconButton\n        on:click={getNextImage}\n        class=\"lurinsnavicons material-icons\"\n        aria-label=\"Next\">\n        navigate_next\n      </IconButton>\n    </div>\n  </div>\n</div>\n",
    "<script>\r\n  import \"./../App.scss\";\r\n  import TopAppBar, { Row, Section, Title } from \"@smui/top-app-bar\";\r\n  import IconButton, { Icon } from \"@smui/icon-button\";\r\n  import Button, { Label } from \"@smui/button\";\r\n  import Menu, { SelectionGroup, SelectionGroupIcon } from \"@smui/menu\";\r\n  import { Anchor } from \"@smui/menu-surface\";\r\n  import List, { Item } from \"@smui/list\";\r\n  import page from \"page\";\r\n  import { login, logout, userStore } from \"./../services/loginService.js\";\r\n\r\n  let loggedIn = false;\r\n  const unsubscribe = userStore.subscribe(user => {\r\n    loggedIn = user.loggedIn;\r\n  });\r\n\r\n  let dense = true;\r\n  let prominent = false;\r\n  let variant = \"standard\";\r\n  let collapsed = false;\r\n\r\n  let menu2;\r\n  let anchor2;\r\n</script>\r\n\r\n<style type=\"text/postcss\">.pageTitle{color:#000;color:var(--mdc-theme-on-primary,#000)}\n/*# sourceMappingURL=src/components/HeaderTopBar.svelte.map */</style>\r\n\r\n<TopAppBar {dense} {prominent} {variant} color=\"primary\" bind:collapsed>\r\n  <Row>\r\n    <Section>\r\n      <IconButton class=\"material-icons\" on:click={() => menu2.setOpen(true)}>\r\n        menu\r\n      </IconButton>\r\n      <span class=\"pageTitle\">Lurinfacts</span>\r\n    </Section>\r\n  </Row>\r\n</TopAppBar>\r\n<div use:Anchor bind:this={anchor2}>\r\n  <Menu\r\n    bind:this={menu2}\r\n    anchor={false}\r\n    bind:anchorElement={anchor2}\r\n    anchorCorner=\"BOTTOM_LEFT\">\r\n    <List>\r\n      <Item on:SMUI:action={() => page('/')}>Home</Item>\r\n      <Item on:SMUI:action={() => page('/facts')}>Facts</Item>\r\n      <Item on:SMUI:action={() => page('/images')}>Images</Item>\r\n      <Item on:SMUI:action={() => page('/map')}>Map</Item>\r\n      {#if loggedIn}\r\n        <Item on:SMUI:action={() => page('/admin/contributions')}>\r\n          Manage contributions\r\n        </Item>\r\n        <Item on:SMUI:action={() => page('/admin/addImage')}>Add image</Item>\r\n      {/if}\r\n      <Item on:SMUI:action={() => page('/login')}>\r\n        {loggedIn ? 'Logout' : 'Login'}\r\n      </Item>\r\n      <Item on:SMUI:action={() => page('/settings')}>Settings</Item>\r\n    </List>\r\n  </Menu>\r\n</div>\r\n",
    "<script>\r\n  import {\r\n    svelteFactProposalStore,\r\n    deleteFactProposal,\r\n    acceptFactProposal\r\n  } from \"./../services/factsService\";\r\n  import Fact from \"./Fact.svelte\";\r\n  import Button, { Label } from \"@smui/button\";\r\n  import { notify } from \"./../services/notifyService\";\r\n  import { userStore } from \"./../services/loginService.js\";\r\n\r\n  let loggedIn = false;\r\n  userStore.subscribe(user => {\r\n    loggedIn = user.loggedIn;\r\n  });\r\n\r\n  function onDeleteFactProposal(event) {\r\n    deleteFactProposal(event.detail.fact).then(success => {\r\n      if (success) {\r\n        notify(\"fact was deleted\");\r\n      } else {\r\n        notify(\"something went wrong while deleting the fact\");\r\n      }\r\n    });\r\n  }\r\n\r\n  function onAcceptFactProposal(event) {\r\n    acceptFactProposal(event.detail.fact).then(success => {\r\n      if (success) {\r\n        notify(\"fact was accepted\");\r\n      } else {\r\n        notify(\"something went wrong while accepting the fact\");\r\n      }\r\n    });\r\n  }\r\n</script>\r\n\r\n<style type=\"text/postcss\">.list{display:flex;flex-wrap:wrap;justify-content:space-evenly}.list-item{display:flex;padding:.5em;width:350px;flex-grow:1}.list-content{background-color:#fff;display:flex;flex-direction:column;padding:1em;width:100%}.list-content p{flex:1 0 auto}[dir=ltr] ul{padding-left:5px}[dir=rtl] ul{padding-right:5px}\n/*# sourceMappingURL=src/components/ManageContribution.svelte.map */</style>\r\n\r\n<h1>Manage fact purposals</h1>\r\n<div>\r\n  <ul class=\"list\">\r\n    {#each $svelteFactProposalStore as fact}\r\n      <li class=\"list-item\">\r\n        <Fact\r\n          {fact}\r\n          hasDeleteButton={loggedIn}\r\n          hasAcceptButton={loggedIn}\r\n          on:delete={onDeleteFactProposal}\r\n          on:accept={onAcceptFactProposal}\r\n          class=\"list-content\" />\r\n      </li>\r\n    {/each}\r\n  </ul>\r\n</div>\r\n",
    "<script>\n  import { createEventDispatcher } from \"svelte\";\n  import { getDisplayTime } from \"../services/displayTime.js\";\n  import Card from \"@smui/Card\";\n  import Button, { Label } from \"@smui/button\";\n\n  export let fact;\n  export let hasDeleteButton;\n  export let hasAcceptButton;\n\n  const dispatch = createEventDispatcher();\n\n  function deleteFact() {\n    dispatch(\"delete\", { fact });\n  }\n  function acceptFact() {\n    dispatch(\"accept\", { fact });\n  }\n</script>\n\n<style>.factContainer{width:100%;max-width:350px;min-width:350px}.factSubtitle{font-size:12px;text-align:right;padding-top:4px}@media (color-index:48){.factContainer{color:#000}}@media (prefers-color-scheme:dark){.factContainer{color:#000}}\n/*# sourceMappingURL=src/components/Fact.svelte.map */</style>\n\n<div style=\"display: flex; flex-wrap: wrap;\">\n  <div class=\"card-container short factContainer\">\n    <Card style=\"background-color: #ffff65;\" padded>\n      {fact.fact}\n      <div class=\"factSubtitle\">\n        {getDisplayTime(fact.insertTime)} | by {fact.contributor}\n      </div>\n    </Card>\n    {#if hasDeleteButton}\n      <Button on:click={deleteFact} variant=\"raised\" class=\"formButton\">\n        <Label>Delete fact</Label>\n      </Button>\n    {/if}\n    {#if hasAcceptButton}\n      <Button on:click={acceptFact} variant=\"raised\" class=\"formButton\">\n        <Label>Accept fact</Label>\n      </Button>\n    {/if}\n  </div>\n</div>\n",
    "<script>\n  import { getDisplayTime } from \"../services/displayTime.js\";\n  import { createEventDispatcher } from \"svelte\";\n  import Button, { Label } from \"@smui/button\";\n  import page from \"page\";\n\n  export let image;\n  export let hasDeleteButton;\n\n  let landscapeClass = \"portrait\";\n\n  const dispatch = createEventDispatcher();\n\n  function deleteLocation() {\n    dispatch(\"delete\", image);\n  }\n\n  function imageLoaded(e) {\n    if (e.target.width > e.target.height) {\n      landscapeClass = \"landscape\";\n    }\n  }\n</script>\n\n<style>.imageContainer{margin:5px;padding:15px;background-color:#ffff65;font-size:18px;border:2px solid #b7b3b3;border-radius:6px}@media (color-index:48){.imageContainer{color:#000}}@media (prefers-color-scheme:dark){.imageContainer{color:#000}}.imageText{width:100%}.imageSubtitle{font-size:12px;float:right}.square{position:relative;width:200px;height:200px;overflow:hidden;margin:6px auto}img{position:absolute;max-width:100%;width:100%;height:auto;top:50%;left:50%;transform:translate(-50%,-50%)}img.landscape{height:100%;width:auto;-o-object-fit:cover;object-fit:cover}\n/*# sourceMappingURL=src/components/Image.svelte.map */</style>\n\n<div\n  class=\"imageContainer\"\n  on:click={() => page('/images/slideShow?key=' + image.key)}>\n\n  <div class=\"imageText\">{image.imageTitle}</div>\n  <div class=\"square\">\n    <img\n      src={image.thumbnail}\n      class={landscapeClass}\n      on:load={imageLoaded}\n      alt={image.funimage} />\n  </div>\n  <div class=\"imageText\">{image.funFact}</div>\n  <div class=\"imageSubtitle\">{getDisplayTime(image.insertTime)}</div>\n  {#if hasDeleteButton}\n    <Button on:click={deleteLocation} variant=\"raised\" class=\"formButton\">\n      <Label>Delete location</Label>\n    </Button>\n  {/if}\n</div>\n",
    "<script>\n  import { onMount } from \"svelte\";\n  import {\n    getPositionByCoords,\n    getPositionByAddress\n  } from \"./../services/geoLocationService.js\";\n  import Button, { Label } from \"@smui/button\";\n  import Textfield from \"@smui/textfield\";\n  import HelperText from \"@smui/textfield/helper-text/index\";\n  import Radio from \"@smui/radio\";\n  import FormField from \"@smui/form-field\";\n  import { Icon } from \"@smui/icon-button\";\n  import { createEventDispatcher } from \"svelte\";\n  const dispatch = createEventDispatcher();\n\n  export let location = {};\n\n  let map;\n  let mapElement;\n  let marker = {};\n  let selectedOption = \"map\";\n  let addressSearch = \"\";\n  function initMap() {\n    if (!googleMapsLoaded) {\n      return;\n    }\n    let initialCoords = { lat: 46.65, lng: 7.709 };\n\n    if (location && location.latitude) {\n      initialCoords = { lat: location.latitude, lng: location.longitude };\n    } else {\n      updateLocationByCoords(initialCoords.lat, initialCoords.lng);\n    }\n    map = new google.maps.Map(mapElement, {\n      center: initialCoords,\n      zoom: 8\n    });\n    marker = new google.maps.Marker({\n      map: map,\n      draggable: true,\n      animation: google.maps.Animation.DROP,\n      position: initialCoords\n    });\n    marker.addListener(\"dragend\", function() {\n      console.log(marker);\n      updateLocationByCoords(marker.position.lat(), marker.position.lng());\n    });\n  }\n\n  async function updateLocationByCoords(lat, lng) {\n    try {\n      location = await getPositionByCoords(lat, lng);\n      dispatch(\"locationChoosen\", location);\n    } catch (e) {\n      console.log(\"updateLocationByCoords: error while looking up coords\", e);\n    }\n  }\n  async function getByAddress(e) {\n    e.preventDefault();\n    try {\n      location = await getPositionByAddress(addressSearch);\n      dispatch(\"locationChoosen\", location);\n    } catch (e) {\n      console.log(\"getByAddress: error while looking up coords\", e);\n    }\n    return false;\n  }\n\n  onMount(async () => {\n    optionChanged();\n  });\n\n  let locationOfDevice = {};\n  function optionChanged() {\n    if (selectedOption == \"map\") {\n      initMap();\n    } else if (selectedOption == \"device\") {\n      locationOfDevice = {\n        msg: \"Locate your device postion.....\",\n        icon: \"phonelink_ring\"\n      };\n      if (!navigator.geolocation) {\n        locationOfDevice = {\n          msg: \"Looks like your phone does not support gelocation\",\n          icon: \"local_phone\"\n        };\n        return;\n      }\n\n      navigator.geolocation.getCurrentPosition(\n        position => {\n          locationOfDevice = { msg: \"Location found\", icon: \"done\" };\n          location = {\n            latitude: position.coords.latitude,\n            longitude: position.coords.longitude\n          };\n          updateLocationByCoords(\n            position.coords.latitude,\n            position.coords.longitude\n          );\n        },\n        error => {\n          if (error.code == 1) {\n            locationOfDevice = {\n              msg: \"Error on fetching the device's locaction\",\n              icon: \"phonelink_erase\"\n            };\n          } else {\n            locationOfDevice = {\n              msg: \"Lurin has no rights to access your device's location 💩\",\n              icon: \"phonelink_lock\"\n            };\n          }\n        }\n      );\n    }\n  }\n</script>\n\n<style type=\"text/postcss\">#map{height:300px;width:100%}\n/*# sourceMappingURL=src/components/LocationSelector.svelte.map */</style>\n\n<div>\n  <h2>Add location</h2>\n  <div>\n    <FormField>\n      <Radio\n        bind:group={selectedOption}\n        value=\"address\"\n        on:change={optionChanged} />\n      <span slot=\"label\">By address</span>\n    </FormField>\n    <FormField>\n      <Radio\n        bind:group={selectedOption}\n        value=\"map\"\n        on:change={optionChanged} />\n      <span slot=\"label\">By map location</span>\n    </FormField>\n    <FormField>\n      <Radio\n        bind:group={selectedOption}\n        value=\"device\"\n        on:change={optionChanged} />\n      <span slot=\"label\">Device location</span>\n    </FormField>\n  </div>\n\n  {#if selectedOption == 'address'}\n    <div>\n      <h3>Choose by address</h3>\n      <div>\n        <Textfield\n          class=\"shaped-outlined\"\n          variant=\"outlined\"\n          bind:value={addressSearch}\n          label=\"Address\"\n          style=\"width: 100%;\"\n          input$required\n          input$min-length=\"5\"\n          input$max-length=\"240\"\n          input$aria-controls=\"helper-text-shaped-outlined-a\"\n          input$aria-describedby=\"helper-text-shaped-outlined-a\" />\n        <HelperText id=\"helper-text-shaped-outlined-a\">\n          Where have you been? Enter a address, Lurin will guess the\n          coordinates.\n        </HelperText>\n      </div>\n      <div style=\"width: 100%;height: 80px;\">\n        <Button on:click={getByAddress} variant=\"raised\" class=\"formButton\">\n          <Label>Get coords by address</Label>\n        </Button>\n      </div>\n    </div>\n  {:else if selectedOption == 'device'}\n    <div>\n      <h3>Choose by device</h3>\n      <Icon class=\"material-icons\" style=\"vertical-align: text-bottom\">\n        {locationOfDevice.icon}\n      </Icon>\n      <span>{locationOfDevice.msg}</span>\n    </div>\n  {:else if selectedOption == 'map'}\n    <div>\n      <h3>Choose by map</h3>\n      <div id=\"map\" bind:this={mapElement} />\n    </div>\n  {/if}\n\n  {#if location.address}\n    <h3>Choosen location</h3>\n    Latitdude: {location.latitude}\n    <br />\n    Longitude: {location.longitude}\n    <br />\n    Address: {location.address}\n    <br />\n    Country: {location.country}\n    <br />\n  {/if}\n</div>\n",
    "<script>\n  import {\n    readFile,\n    getImageFormUrl\n  } from \"./../services/imageReaderService.js\";\n  import LinearProgress from \"@smui/linear-progress\";\n  import { Icon } from \"@smui/icon-button\";\n  import Button, { Label } from \"@smui/button\";\n  import { createEventDispatcher } from \"svelte\";\n  import {\n    getCachedMediaMetadata,\n    deleteCachedMediaMetadata\n  } from \"./../services/imageMediaDataCache.js\";\n  import { tick } from \"svelte\";\n  import { onMount } from \"svelte\";\n\n  const dispatch = createEventDispatcher();\n\n  let uploadedFiles = [];\n  let thumbnailImage = null;\n  let fullsizeImage = null;\n  let cachedImage = {};\n  let cachedImageLoading = true; //!!new URLSearchParams(window.location.search).get(\"shareTarget\");\n  onMount(async () => {\n    if (cachedImageLoading) {\n      loadCachedImage();\n    }\n  });\n\n  async function loadCachedImage() {\n    const images = await getCachedMediaMetadata(\"image\");\n    let img = images ? images[0] : null;\n    if (img) {\n      let [thumb, fullSize] = await getImageFormUrl(img.src);\n      cachedImage = img;\n      cachedImage.thumbnailImage = thumb;\n      cachedImage.fullsizeImage = fullSize;\n    }\n    cachedImageLoading = false;\n  }\n\n  async function useCachedImage(e) {\n    e.preventDefault();\n    thumbnailImage = cachedImage.thumbnailImage;\n    fullsizeImage = cachedImage.fullsizeImage;\n    dispatch(\"imageChoosen\", { thumbnailImage, fullsizeImage });\n    deleteCachedMediaMetadata(cachedImage.src).then(\n      result => (cachedImage = {})\n    );\n  }\n\n  async function deleteCachedImage(e) {\n    e.preventDefault();\n    await deleteCachedMediaMetadata(cachedImage.src);\n    cachedImage = null;\n    cachedImageLoading = true;\n    loadCachedImage();\n    return false;\n  }\n\n  function readUploadedFiles(e) {\n    readFile(e.target.files[0]).then(([thumb, fullSize]) => {\n      thumbnailImage = thumb;\n      fullsizeImage = fullSize;\n      dispatch(\"imageChoosen\", { thumbnailImage, fullsizeImage });\n    });\n  }\n\n  function deleteImages() {\n    thumbnailImage = null;\n    fullsizeImage = null;\n    dispatch(\"imageChoosen\", { thumbnailImage, fullsizeImage });\n  }\n</script>\n\n<style type=\"text/postcss\">.dropZoneContainer,.dropZoneOverlay,.FileUpload{width:100%;height:71px;cursor:pointer}.dropZoneOverlay{border:1px dotted;color:grey;border-radius:4px 4px 0 0;position:relative;top:-71px;text-align:center}.FileUpload{opacity:0;position:relative;z-index:1}.flex-grid-imageOk{display:flex;min-height:70px}.col{flex:auto}\n/*# sourceMappingURL=src/components/ImageSelector.svelte.map */</style>\n\n<div>\n  <h2>Select image</h2>\n  {#if cachedImageLoading}\n    <LinearProgress indeterminate />\n  {:else if cachedImage.src}\n    <div class=\"col\">\n      <img\n        src={cachedImage.thumbnailImage}\n        alt=\"shared image\"\n        style=\"max-height:100px;height:auto\" />\n    </div>\n    <div class=\"col\">\n      <Button on:click={useCachedImage} variant=\"raised\" class=\"formButton\">\n        <Label>Use this image</Label>\n      </Button>\n      <Button on:click={deleteCachedImage} variant=\"raised\" class=\"formButton\">\n        <Label>Choose other image</Label>\n      </Button>\n    </div>\n  {/if}\n  {#if !cachedImageLoading && !cachedImage.src && !thumbnailImage}\n    <div class=\"dropZoneContainer\">\n      <input\n        type=\"file\"\n        id=\"drop_zone\"\n        bind:value={uploadedFiles}\n        class=\"FileUpload\"\n        accept=\".jpg,.png,.gif\"\n        on:change={readUploadedFiles} />\n      <div class=\"dropZoneOverlay\">\n        Drag and drop your image\n        <br />\n        or\n        <br />\n        Click to add\n      </div>\n    </div>\n  {/if}\n  {#if thumbnailImage}\n    <div class=\"flex-grid-imageOk\">\n      <div class=\"col\" style=\"padding: 4px;\">\n        <img\n          src={thumbnailImage}\n          style=\"max-height:60px;height:100%\"\n          alt=\"thmbnail\" />\n      </div>\n      <div class=\"col\" style=\"padding-top: 12px;\">\n        <Icon class=\"material-icons\" style=\"vertical-align: text-bottom;\">\n          done\n        </Icon>\n        Thumbnail is ready!\n        {#if fullsizeImage}\n          <br />\n          <Icon class=\"material-icons\" style=\"vertical-align: text-bottom;\">\n            done\n          </Icon>\n          Fullsize is ready!\n        {/if}\n      </div>\n      <div class=\"col\" style=\"height:100px\">\n        <Button\n          on:click={deleteImages}\n          disabled={!thumbnailImage}\n          variant=\"raised\"\n          class=\"formButton\">\n          <Label>Delete</Label>\n        </Button>\n      </div>\n    </div>\n  {/if}\n</div>\n"
  ],
  "names": [],
  "mappings": "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"
}